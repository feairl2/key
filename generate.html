<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8"/>
<title>é‘°åŒ™ç”Ÿæˆä¸­â€¦</title>
<style>
body{
    background:#0d0d0d; color:white;
    font-family:"Poppins",sans-serif;
    text-align:center;
    padding-top:120px;
}
.box{
    width:420px;
    margin:auto;
    background:rgba(255,255,255,0.05);
    padding:30px;
    border-radius:18px;
    backdrop-filter:blur(10px);
}
.key{
    font-size:26px;
    color:#00ff99;
    margin-top:20px;
}
</style>
</head>

<body>
<div class="box">
    <h2>ğŸ” æ­£åœ¨å®Œæˆæˆæ¬Šâ€¦</h2>
    <p id="msg">è«‹ç¨å€™</p>
    <div id="key" class="key"></div>
</div>

<script>
const DB_URL = "https://feairl-a7e28-default-rtdb.firebaseio.com";

// å–å¾—ä½¿ç”¨è€… IP
async function getIP(){
    let res = await fetch("https://api.ipify.org?format=json");
    let data = await res.json();
    return data.ip;
}

// ç”¢ç”Ÿéš¨æ©Ÿ KEYï¼ˆé¡¯ç¤ºç”¨ï¼‰
function randomKey(){
    return "KEY-" + Math.random().toString(36).substring(2,10).toUpperCase();
}

async function main(){
    try{
        let ip = await getIP();
        let key = randomKey();

        // åœ¨ Firebase å¯«å…¥æ­¤ IP å·²å®Œæˆä»»å‹™
        await fetch(`${DB_URL}/worklog/${ip}.json`, {
            method:"PUT",
            body: JSON.stringify({
                completed: true,
                time: Date.now()
            })
        });

        document.getElementById("msg").innerText = "å·²å®Œæˆé©—è­‰ï¼ä½ çš„ KEYï¼š";
        document.getElementById("key").innerText = key;

    } catch(e){
        document.getElementById("msg").innerText = "âŒ ç™¼ç”ŸéŒ¯èª¤ï¼š" + e;
    }
}

main();
</script>

</body>
</html>
