<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>老倍遊戲 Key System</title>
<style>
body {
    background: #0f0f0f;
    font-family: Arial;
    color: white;
    text-align: center;
    padding-top: 60px;
}
h1 {
    color: #7b61ff;
    font-size: 36px;
}
button {
    padding: 14px 28px;
    border: none;
    border-radius: 8px;
    font-size: 18px;
    cursor: pointer;
    background: #5b4bff;
    color: white;
    transition: 0.2s;
}
button:hover {
    background: #7a6dff;
}
</style>
</head>
<body>

<h1>老倍遊戲 Key System</h1>
<div id="content" style="margin-top:25px;"></div>

<script>
const url = new URL(window.location.href);
const token = url.searchParams.get("token");
const done = url.searchParams.get("done");

async function loadPage(){
    let res = await fetch(`/api/generate?token=${token || ""}&done=${done || ""}`);
    let data = await res.json();

    if (data.step === 1){
        document.getElementById("content").innerHTML = `
            <h2>Step 1</h2>
            <button onclick="location.href='https://work.ink/26Yy/feairl-keysystem?redirect=https://https://key-1n3s.vercel.app//?token=${data.token}&done=1'">Continue</button>
        `;
    }

    if (data.step === 2){
        document.getElementById("content").innerHTML = `
            <h2>Step 2</h2>
            <button onclick="location.href='https://work.ink/26Yy/feairl-keysystem-1?redirect=https://https://key-1n3s.vercel.app//?token=${data.token}&done=1'">Continue</button>
        `;
    }

    if (data.step === 3){
        document.getElementById("content").innerHTML = `
            <h2>你的 Key</h2>
            <p style="color:#40ff9c;font-size:24px;margin-top:10px;">${data.key}</p>
        `;
    }
}

loadPage();
</script>

</body>
</html>



