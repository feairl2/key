<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>ä»Šæ—¥å°ˆå±¬é‘°åŒ™</title>

<style>
    body {
        background: #0b0b0b;
        margin: 0;
        font-family: "Poppins", sans-serif;
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }

    .box {
        width: 520px;
        background: rgba(30, 30, 30, 0.75);
        padding: 40px;
        border-radius: 22px;
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255,255,255,0.1);
        text-align: center;
    }

    .key-box {
        font-size: 24px;
        margin-top: 20px;
        padding: 15px;
        background: rgba(255,255,255,0.05);
        border-radius: 12px;
        word-wrap: break-word;
    }
</style>

</head>
<body>

<div class="box" id="content">
    <h2>ğŸ” æ­£åœ¨é©—è­‰ Work.ink â€¦</h2>
</div>

<script>
const params = new URLSearchParams(window.location.search);
const ref = params.get("ref");

// âœ¦ æ²’æœ‰ ref â†’ ç›´æ¥æ‹’çµ•
if (!ref) {
    document.getElementById("content").innerHTML = `
        <h2>âŒ å°šæœªå®Œæˆ Work.ink</h2>
        <p>è«‹å¾ Work.ink å®Œæˆä»»å‹™å¾Œè‡ªå‹•è¿”å›æœ¬é ã€‚</p>
    `;
} else {

    // âœ¦ å‘¼å« Work.ink API é©—è­‰ ref æ˜¯å¦çœŸçš„å®Œæˆ
    fetch("https://work.ink/api/check?ref=" + ref)
        .then(res => res.json())
        .then(data => {

            if (!data.valid) {
                // âŒ æ²’æœ‰é€šé Work.ink
                document.getElementById("content").innerHTML = `
                    <h2>âŒ Work.ink é©—è­‰å¤±æ•—</h2>
                    <p>è«‹é‡æ–°å¾ Work.ink å®Œæˆä»»å‹™ã€‚</p>
                `;
                return;
            }

            // âœ” é€šé Work.ink â†’ å†å–å¾—ä½¿ç”¨è€… IP ç”Ÿæˆé‘°åŒ™
            fetch("https://api.ipify.org?format=json")
                .then(r => r.json())
                .then(ipData => {

                    const today = new Date().toISOString().split("T")[0];
                    const raw = today + "-" + ipData.ip;
                    const key = "Feairl-" + btoa(raw).replace(/=/g,"");

                    document.getElementById("content").innerHTML = `
                        <h2>ğŸ‰ é©—è­‰æˆåŠŸï¼</h2>
                        <p>ä»Šæ—¥æ‚¨çš„å°ˆå±¬é‘°åŒ™ï¼š</p>
                        <div class="key-box">${key}</div>
                        <p style="opacity:0.6;margin-top:10px;">
                            æ¯å€‹äººä¾ IP ç”¢ç”Ÿï¼Œ24 å°æ™‚æ›´æ–°
                        </p>
                    `;
                });

        });
}
</script>

</body>
</html>
